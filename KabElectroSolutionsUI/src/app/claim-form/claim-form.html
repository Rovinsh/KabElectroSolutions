<div class="flex justify-center items-start p-8 bg-gray-100 min-h-screen">
  <mat-card class="w-full max-w-5xl shadow-xl rounded-2xl">
    <mat-card-header class="bg-blue-600 text-white p-4 rounded-t-2xl">
      <mat-card-title class="text-xl font-semibold">Create New Claim</mat-card-title>
    </mat-card-header>
    <div class="col-span-2 flex justify-end" style="margin-left: 29%;">
      <button mat-raised-button color="primary" type="submit" class="px-8 py-2 text-lg">
        Submit Claim
      </button>
    </div>

    <mat-card-content class="p-6">
      <form [formGroup]="claimForm" (ngSubmit)="onSubmit()" class="grid grid-cols-2 gap-6">

        <!-- Technician -->
        <!-- <mat-form-field appearance="outline">
          <mat-label>Technician Name</mat-label>
          <input matInput formControlName="technicianName">
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>LM Status</mat-label>
          <input matInput formControlName="lmStatus">
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Item Name</mat-label>
          <input matInput formControlName="itemName">
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Rating</mat-label>
          <input matInput type="number" formControlName="rating">
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>L3 Approval Date</mat-label>
          <input matInput type="date" formControlName="l3ApprovalDate">
        </mat-form-field>

        <div class="flex items-center">
          <mat-checkbox formControlName="otpRequired">OTP Required</mat-checkbox>
        </div> -->
        <mat-card-header class="bg-blue-600 text-white p-4 rounded-t-2xl">
          <h3>Claim Details</h3>
        </mat-card-header>

        <mat-form-field appearance="outline" class="col-span-2">
          <mat-label>Concern</mat-label>
          <textarea matInput formControlName="concern" rows="3"></textarea>
        </mat-form-field>

        <mat-form-field appearance="outline" class="col-span-2">
          <mat-label>Remarks</mat-label>
          <textarea matInput formControlName="remarks" rows="3"></textarea>
        </mat-form-field>

        <mat-form-field appearance="outline" class="col-span-2">
          <mat-label>Reasons</mat-label>
          <textarea matInput formControlName="reasons" rows="3"></textarea>
        </mat-form-field>

        <mat-card-header class="bg-blue-600 text-white p-4 rounded-t-2xl">
          <h3>Customer Details</h3>
        </mat-card-header>

        <!-- Customer Info -->
        <mat-form-field appearance="outline">
          <mat-label>Customer Name</mat-label>
          <input matInput formControlName="customerName">
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Customer Email</mat-label>
          <input matInput type="email" formControlName="customerEmail">
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Customer Alternative Email</mat-label>
          <input matInput type="email" formControlName="customerAlternativeEmail">
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Customer Phone</mat-label>
          <input matInput formControlName="customerPhone">
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Customer Alternative Phone</mat-label>
          <input matInput formControlName="customerAlternativePhone">
        </mat-form-field>

        <mat-form-field appearance="outline" class="col-span-2">
          <mat-label>Customer Address</mat-label>
          <textarea matInput formControlName="customerAddress" rows="2"></textarea>
        </mat-form-field>


        <mat-form-field appearance="outline" class="col-span-2">
          <mat-label>Customer State</mat-label>
          <input type="text" matInput formControlName="customerState" [matAutocomplete]="stateAuto">

          <mat-autocomplete #stateAuto="matAutocomplete" autoActiveFirstOption>
            @for (state of filteredStates$ | async; track state.id) {
            <mat-option [value]="state.name" (onSelectionChange)="onStateSelected(state.id)">
              {{ state.name }}
            </mat-option>
            }
          </mat-autocomplete>
        </mat-form-field>


        <mat-form-field appearance="outline" class="col-span-2">
          <mat-label>Customer City</mat-label>
          <input type="text" matInput formControlName="customerCity" [matAutocomplete]="cityAuto">

          <mat-autocomplete #cityAuto="matAutocomplete" autoActiveFirstOption>
            @for (city of filteredCities$ | async; track city.id) {
            <mat-option [value]="city.name" (onSelectionChange)="onCitySelected(city.id)">
              {{ city.name }}
            </mat-option>
            }
          </mat-autocomplete>
        </mat-form-field>

        <mat-form-field appearance="outline" class="col-span-2">
          <mat-label>Customer Pincode</mat-label>
          <input type="text" matInput formControlName="customerPincode" [matAutocomplete]="pincodeAuto">

          <mat-autocomplete #pincodeAuto="matAutocomplete">
            @for (pincode of filteredPincodes$ | async; track pincode.id) {
            <mat-option [value]="pincode.pincode">
              {{ pincode.pincode }}
            </mat-option>
            }
          </mat-autocomplete>
        </mat-form-field>

        <mat-card-header class="bg-blue-600 text-white p-4 rounded-t-2xl">
          <h3>Product Details</h3>
        </mat-card-header>

        <mat-form-field appearance="outline">
          <mat-label>Product Serial Number</mat-label>
          <input matInput formControlName="itemSerialNumber">
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Product Name</mat-label>
          <mat-select formControlName="itemName">
            @for (product of products; track product) {
            <mat-option [value]="product">
              {{ product }}
            </mat-option>
            }
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Category</mat-label>
          <mat-select formControlName="itemCategory">
            @for (category of categories; track category) {
            <mat-option [value]="category.name">
              {{ category.name }}
            </mat-option> }
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Brand</mat-label>
          <mat-select formControlName="itemBrand">
            @for (brand of brands; track brand) {
            <mat-option [value]="brand.name">
              {{ brand.name }}
            </mat-option> }
          </mat-select>
        </mat-form-field>

         <mat-form-field appearance="outline">
          <mat-label>Product Price</mat-label>
          <input matInput type="number" formControlName="itemPrice">
        </mat-form-field>

<mat-form-field appearance="outline">
  <mat-label>Purchase Date</mat-label>
  <input 
    matInput 
    [matDatepicker]="picker" 
    formControlName="planSoldDate">

  <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
  <mat-datepicker #picker></mat-datepicker>
</mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>SLA No</mat-label>
          <input matInput formControlName="SLANo">
        </mat-form-field>
        

        <!-- Financials -->
        <!-- <mat-form-field appearance="outline">
          <mat-label>Claim Amount</mat-label>
          <input matInput type="number" formControlName="claimAmount">
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Payment Status</mat-label>
          <input matInput formControlName="paymentStatus">
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Payment Txn Id</mat-label>
          <input matInput formControlName="paymentTxnId">
        </mat-form-field> -->

        <mat-card-header class="bg-blue-600 text-white p-4 rounded-t-2xl">
          <h3>Warranty Details</h3>
        </mat-card-header>

        <mat-form-field appearance="outline">
          <mat-label>Warranty Serial No</mat-label>
          <input matInput formControlName="warranty">
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Warranty Code</mat-label>
          <input matInput formControlName="warrantyActivationCode">
        </mat-form-field>

          <mat-form-field appearance="outline" class="col-span-2">
          <mat-label>Warranty Type</mat-label>
          <input type="text" matInput formControlName="warrantyType" [matAutocomplete]="warrantyTypeAuto">

          <mat-autocomplete #warrantyTypeAuto="matAutocomplete" autoActiveFirstOption>
            @for (warrantyType of filteredWarrantyTypes$ | async; track warrantyType.id) {
            <mat-option [value]="warrantyType.name">
              {{ warrantyType.name }}
            </mat-option>
            }
          </mat-autocomplete>
        </mat-form-field>

        <!-- Submit -->
        <div class="col-span-2 flex justify-end" style="margin-left: 29%;">
          <button mat-raised-button color="primary" type="submit" class="px-8 py-2 text-lg">
            Submit Claim
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>