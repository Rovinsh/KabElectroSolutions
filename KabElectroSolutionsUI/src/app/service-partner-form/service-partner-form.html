<div class="w-full min-h-screen bg-gray-100 p-8 flex justify-center items-start overflow-y-auto divheight">
  <mat-card class="w-full max-w-6xl shadow-xl rounded-2xl">
    <mat-card-header class="bg-blue-600 text-white p-4 flex justify-between items-center rounded-t-2xl">
      <mat-card-title class="text-lg font-semibold text-black">{{ title }}</mat-card-title>
      <button mat-icon-button (click)="onClose()" class="text-white hover:text-red-300 text-xl font-bold">âœ•</button>
    </mat-card-header>

    <hr class="my-0 marginbottom border-gray-300" />

    <mat-card-content class="p-6">
      <form [formGroup]="servicePartnerForm" (ngSubmit)="onSubmit()" class="row gy-3 mrgtop">
         <div class="col-4">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>First Name</mat-label>
            <input matInput formControlName="firstName" />
            <mat-error *ngIf="servicePartnerForm.get('firstName')?.hasError('required')">
             first Name  is required
            </mat-error>
          </mat-form-field>
        </div>
          <div class="col-4">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Last Name</mat-label>
            <input matInput formControlName="lastName" />
          </mat-form-field>
        </div>
        <div class="col-4">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Service Partner</mat-label>
            <input matInput formControlName="servicePartner" />
            <mat-error *ngIf="servicePartnerForm.get('servicePartner')?.hasError('required')">
             Service Partner Name is required
            </mat-error>
          </mat-form-field>
        </div>

        <div class="col-4">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Service Partner PAN</mat-label>
            <input matInput formControlName="pan" />
            <mat-error *ngIf="servicePartnerForm.get('pan')?.hasError('required')">
             Service Partner PAN is required
            </mat-error>
          </mat-form-field>
        </div>
        <div class="col-4">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Service Partner GST</mat-label>
            <input matInput formControlName="gst" />
            <mat-error *ngIf="servicePartnerForm.get('gst')?.hasError('required')">
             Service Partner GST is required
            </mat-error>
          </mat-form-field>
        </div>

        <!-- Customer Mobile No -->
        <div class="col-4">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Service Partner Mobile No</mat-label>
            <input matInput formControlName="phone" />
            <mat-error *ngIf="servicePartnerForm.get('phone')?.hasError('required')">Service Partner Mobile No is required</mat-error>
          </mat-form-field>
        </div>

        <!-- Customer Email -->
        <div class="col-4">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Service Partner Email</mat-label>
            <input matInput formControlName="email" />
            <mat-error *ngIf="servicePartnerForm.get('email')?.hasError('required')">Service Partner is required</mat-error>
          </mat-form-field>
        </div>

        <!-- Customer State -->
        <div class="col-4">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Service Partner State</mat-label>
            <input matInput formControlName="stateId"
                   [matAutocomplete]="stateAuto"
                   (focus)="showState()"
                   (input)="showState()" />
            <mat-autocomplete #stateAuto="matAutocomplete" [displayWith]="displayState" autoActiveFirstOption (optionSelected)="onStateSelected($event.option.value)">
              <mat-option *ngFor="let state of filteredStates$ | async" [value]="state">{{ state.name }}</mat-option>
            </mat-autocomplete>
            <mat-error *ngIf="servicePartnerForm.get('stateId')?.hasError('required')">Service Partner State is required</mat-error>
          </mat-form-field>
        </div>

        <!-- Customer City -->
        <div class="col-4">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Service Partner City</mat-label>
            <input matInput formControlName="cityId"
                   [matAutocomplete]="cityAuto"
                   (focus)="showCities()"
                   (input)="showCities()" />
            <mat-autocomplete #cityAuto="matAutocomplete" [displayWith]="displayCities" autoActiveFirstOption (optionSelected)="onCitySelected($event.option.value)">
              <mat-option *ngFor="let city of filteredCities$ | async" [value]="city">{{ city.name }}</mat-option>
            </mat-autocomplete>
            <mat-error *ngIf="servicePartnerForm.get('cityId')?.hasError('required')">Service Partner City is required</mat-error>
          </mat-form-field>
        </div>

        <!-- Customer Address -->
        <div class="col-4">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Service Partner Address</mat-label>
            <textarea matInput formControlName="address" rows="2"></textarea>
            <mat-error *ngIf="servicePartnerForm.get('address')?.hasError('required')">Service Partner Address is required</mat-error>
          </mat-form-field>
        </div>

        <!-- Customer Pincode -->
        <div class="col-4">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Service Partner Pincode</mat-label>
            <input matInput formControlName="pinCodeId"
                   [matAutocomplete]="pincodeAuto"
                   (focus)="showPincode()"
                   (input)="showPincode()" />
            <mat-autocomplete #pincodeAuto="matAutocomplete" [displayWith]="displayPincodes">
              <mat-option *ngFor="let pin of filteredPincodes$ | async" [value]="pin">{{ pin.pincode }}</mat-option>
            </mat-autocomplete>
            <mat-error *ngIf="servicePartnerForm.get('pinCodeId')?.hasError('required')">Service Partner Pincode is required</mat-error>
          </mat-form-field>
        </div>

        <!-- Extra Info -->
        <div class="col-4">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Extra Info</mat-label>
            <textarea matInput formControlName="extraInfo" rows="2"></textarea>
          </mat-form-field>
        </div>

       
        <!-- Active/Disable Warranty -->
        <div class="col-3 flex items-center">
          <mat-checkbox formControlName="isDisable">Disable Service Partner</mat-checkbox>
        </div>

        <!-- Submit Button -->
        <div class="col-12 text-end mt-4">
          <button mat-raised-button color="primary" type="submit">{{ submitBtnLabel }}</button>
        </div>

      </form>
    </mat-card-content>
  </mat-card>
</div>
